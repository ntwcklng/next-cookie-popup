{"version":3,"sources":["../src/index.ts","../src/context/CookieContext.tsx"],"sourcesContent":["// src/index.ts\nexport { CookieProvider } from './context/CookieContext'\nexport { useCookiePopup } from './context/CookieContext'\n","// src/context/CookieContext.tsx\n'use client'\nimport React, { createContext, useContext, useEffect, useState } from 'react'\n\ntype ConsentState = {\n\thasConsent: boolean\n\tshowCookiePopup: boolean\n\tpreferences: Record<string, string>\n}\n\ntype ConsentActions = {\n\tacceptAll: () => void\n\trejectAll: () => void\n\ttoggleCookiePopup: (toggle: boolean) => void\n\tsavePreferences: (preferences: Record<string, string>) => void\n}\n\nexport type CookieProviderProps = {\n\tchildren: React.ReactNode\n\tcookieName?: string\n\texpireDays?: number\n}\n\nconst CookieContext = createContext<(ConsentState & ConsentActions) | null>(\n\tnull\n)\n\nconst getCookie = (name: string) => {\n\tif (typeof document === 'undefined') return null\n\tconst value = `; ${document.cookie}`\n\tconst parts = value.split(`; ${name}=`)\n\tif (parts.length === 2) return parts.pop()?.split(';').shift()\n\treturn null\n}\n\nconst setCookie = (name: string, value: string, days: number) => {\n\tif (typeof document === 'undefined') return\n\tconst expires = new Date()\n\texpires.setTime(expires.getTime() + days * 24 * 60 * 60 * 1000)\n\tdocument.cookie = `${name}=${value};expires=${expires.toUTCString()}`\n}\n\nexport const CookieProvider = ({\n\tchildren,\n\tcookieName = 'cookie-popup',\n\texpireDays = 365,\n}: CookieProviderProps) => {\n\tconst [state, setState] = useState<ConsentState>({\n\t\thasConsent: false,\n\t\tshowCookiePopup: false,\n\t\tpreferences: {},\n\t})\n\n\tuseEffect(() => {\n\t\tconst consentCookie = getCookie(cookieName)\n\t\tif (consentCookie) {\n\t\t\tsetState(JSON.parse(consentCookie))\n\t\t} else {\n\t\t\tsetState((prev) => ({ ...prev, showCookiePopup: true }))\n\t\t}\n\t}, [cookieName])\n\n\tconst acceptAll = () => {\n\t\tconst newState = {\n\t\t\thasConsent: true,\n\t\t\tshowCookiePopup: false,\n\t\t\tpreferences: {},\n\t\t}\n\t\tsetCookie(cookieName, JSON.stringify(newState), expireDays)\n\t\tsetState(newState)\n\t}\n\n\tconst toggleCookiePopup = (toggle: boolean) => {\n\t\tconst newState = { ...state, showCookiePopup: toggle }\n\t\tsetCookie(cookieName, JSON.stringify(newState), expireDays)\n\t\tsetState(newState)\n\t}\n\n\tconst rejectAll = () => {\n\t\tconst newState = {\n\t\t\thasConsent: false,\n\t\t\tshowCookiePopup: false,\n\t\t\tpreferences: {},\n\t\t}\n\t\tsetCookie(cookieName, JSON.stringify(newState), expireDays)\n\t\tsetState(newState)\n\t}\n\n\tconst savePreferences = (preferences: Record<string, string>) => {\n\t\tconst newState = { ...state, preferences }\n\t\tsetCookie(cookieName, JSON.stringify(newState), expireDays)\n\t\tsetState(newState)\n\t}\n\n\treturn (\n\t\t<CookieContext.Provider\n\t\t\tvalue={{\n\t\t\t\t...state,\n\t\t\t\tacceptAll,\n\t\t\t\trejectAll,\n\t\t\t\tsavePreferences,\n\t\t\t\ttoggleCookiePopup,\n\t\t\t}}>\n\t\t\t{children}\n\t\t</CookieContext.Provider>\n\t)\n}\n\nexport const useCookiePopup = () => {\n\tconst context = useContext(CookieContext)\n\tif (context === null) {\n\t\tthrow new Error('useCookiePopup must be used within a CookieProvider')\n\t}\n\treturn context\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;ACEA,mBAAsE;AA6FpE;AAxEF,IAAM,oBAAgB;AAAA,EACrB;AACD;AAEA,IAAM,YAAY,CAAC,SAAiB;AACnC,MAAI,OAAO,aAAa,YAAa,QAAO;AAC5C,QAAM,QAAQ,KAAK,SAAS,MAAM;AAClC,QAAM,QAAQ,MAAM,MAAM,KAAK,IAAI,GAAG;AACtC,MAAI,MAAM,WAAW,EAAG,QAAO,MAAM,IAAI,GAAG,MAAM,GAAG,EAAE,MAAM;AAC7D,SAAO;AACR;AAEA,IAAM,YAAY,CAAC,MAAc,OAAe,SAAiB;AAChE,MAAI,OAAO,aAAa,YAAa;AACrC,QAAM,UAAU,oBAAI,KAAK;AACzB,UAAQ,QAAQ,QAAQ,QAAQ,IAAI,OAAO,KAAK,KAAK,KAAK,GAAI;AAC9D,WAAS,SAAS,GAAG,IAAI,IAAI,KAAK,YAAY,QAAQ,YAAY,CAAC;AACpE;AAEO,IAAM,iBAAiB,CAAC;AAAA,EAC9B;AAAA,EACA,aAAa;AAAA,EACb,aAAa;AACd,MAA2B;AAC1B,QAAM,CAAC,OAAO,QAAQ,QAAI,uBAAuB;AAAA,IAChD,YAAY;AAAA,IACZ,iBAAiB;AAAA,IACjB,aAAa,CAAC;AAAA,EACf,CAAC;AAED,8BAAU,MAAM;AACf,UAAM,gBAAgB,UAAU,UAAU;AAC1C,QAAI,eAAe;AAClB,eAAS,KAAK,MAAM,aAAa,CAAC;AAAA,IACnC,OAAO;AACN,eAAS,CAAC,UAAU,EAAE,GAAG,MAAM,iBAAiB,KAAK,EAAE;AAAA,IACxD;AAAA,EACD,GAAG,CAAC,UAAU,CAAC;AAEf,QAAM,YAAY,MAAM;AACvB,UAAM,WAAW;AAAA,MAChB,YAAY;AAAA,MACZ,iBAAiB;AAAA,MACjB,aAAa,CAAC;AAAA,IACf;AACA,cAAU,YAAY,KAAK,UAAU,QAAQ,GAAG,UAAU;AAC1D,aAAS,QAAQ;AAAA,EAClB;AAEA,QAAM,oBAAoB,CAAC,WAAoB;AAC9C,UAAM,WAAW,EAAE,GAAG,OAAO,iBAAiB,OAAO;AACrD,cAAU,YAAY,KAAK,UAAU,QAAQ,GAAG,UAAU;AAC1D,aAAS,QAAQ;AAAA,EAClB;AAEA,QAAM,YAAY,MAAM;AACvB,UAAM,WAAW;AAAA,MAChB,YAAY;AAAA,MACZ,iBAAiB;AAAA,MACjB,aAAa,CAAC;AAAA,IACf;AACA,cAAU,YAAY,KAAK,UAAU,QAAQ,GAAG,UAAU;AAC1D,aAAS,QAAQ;AAAA,EAClB;AAEA,QAAM,kBAAkB,CAAC,gBAAwC;AAChE,UAAM,WAAW,EAAE,GAAG,OAAO,YAAY;AACzC,cAAU,YAAY,KAAK,UAAU,QAAQ,GAAG,UAAU;AAC1D,aAAS,QAAQ;AAAA,EAClB;AAEA,SACC;AAAA,IAAC,cAAc;AAAA,IAAd;AAAA,MACA,OAAO;AAAA,QACN,GAAG;AAAA,QACH;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,MACD;AAAA,MACC;AAAA;AAAA,EACF;AAEF;AAEO,IAAM,iBAAiB,MAAM;AACnC,QAAM,cAAU,yBAAW,aAAa;AACxC,MAAI,YAAY,MAAM;AACrB,UAAM,IAAI,MAAM,qDAAqD;AAAA,EACtE;AACA,SAAO;AACR;","names":[]}